<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">










<html>
  <head>
    <title></title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      </head>
  <body class="composite">
    <!-- TODO: move this into JavaScript to patch the skin
      <div class="xright">  </div>
    -->
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>HK2 Inhabitants Generator<a name="HK2_Inhabitants_Generator"></a></h2><p>The HK2 Inhabitatants Generator is a utility that will generate inhabitants file during the build of your JAR file. It works by analyzing the classes that have been built by javac and then creating the file META-INF/hk2-locator/default (by default) in your JAR file that has information in it about all of the classes that you have marked with @Service or @Contract.</p><p>The HK2 Inhabitatants Generator can be used as a standalone command-line tool, or it can be embedded in any Java program. It can also be used in a Maven build. An Eclipse build and an ant task are also planned. Here are the ways that the HK2 Inhabitants Generator can be used:</p><ul><li><a href="#Command_Line_Tool">Command Line Tool</a></li><li><a href="#Embedded_Usage">Embedded Usage</a></li><li><a href="#Using_Maven">Using Maven</a></li><li><a href="#Eclipse_Plugin">Eclipse Plugin</a></li><li><a href="#Ant_Task">Ant Task</a></li></ul></div><div class="section"><h2><a name="Command_Line_Tool">Command Line Tool</a></h2><p>The HK2 Inhabitants Genertor can be run from the command line like this:</p><div class="source"><pre>java org.jvnet.hk2.generator.HabitatGenerator</pre></div><p>By default the HabibatGenerator will attempt to analyze the first element of the classpath and replace that element (if it is a JAR) with a new JAR that has an inhabitants file in it describing all of the classes marked with @Service. If the first element of the classpath is a directory it will attempt to create a new inhabitants file in that directory describing all of the classes marked with @Service.</p><p>You can modify this behavior by using command line options. Here is the usage statement for HabitatGenerator:</p><div class="source"><pre>java org.jvnet.hk2.generator.HabitatGenerator
  [--file jarFileOrDirectory]
  [--outjar jarFile]
  [--locator locatorName]
  [--verbose]</pre></div><p>The --file option allows the user to pick a directory or JAR file to analyze for classes marked with @Service.</p><p>The --outjar option allows the user to pick the output JAR file that the generator should create with the inhabitants file in it.</p><p>The --locator option allows the user to name the locator that these services should go into. This value is &quot;default&quot; by default.</p><p>The --verbose option make the generator print extra information as it does its work.</p><p>This command line utility will call System.exit when it is done with a 0 code if it was able to work properly and a non-zero value if it failed in some way.</p></div><div class="section"><h2><a name="Embedded_Usage">Embedded Usage</a></h2><p>The class org.jvnet.hk2.generator.HabitatGenerator has a static method on called embeddedMain. The embeddedMain takes the typical argv[] array of parameters and so has the same behavior as the command line usage. The biggest difference is that this method returns an int as the return code, either 0 for success or non-zero for failure and does not call System.exit(). See the <a href="./apidocs/org/jvnet/hk2/generator/HabitatGenerator.html">HabitatGenerator</a> javadoc for more information.</p><p>Using embeddedMain is useful if you want to build your own build tools that generate inhabitants files for your own IDE or other build environment.</p></div><div class="section"><h2><a name="Using_Maven">Using Maven</a></h2><p>The HabitatGenerator is also available as a Maven plugin. It has a single goal, called generateInhabitants that is run in the process-classes phase by default. Using this plugin in your build will cause inhabitants files to be generated in your output directory.</p><p>The following example plugin snippet from a pom.xml will run the InhabitantsGenerator in both the main tree and in the test tree, in case you would like your test sources to also be analyzed for classes marked with @Service.</p><div class="source"><pre>          &lt;plugin&gt;
                &lt;groupId&gt;org.glassfish.hk2&lt;/groupId&gt;
                &lt;artifactId&gt;hk2-inhabitant-generator&lt;/artifactId&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;generateInhabitants&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                    &lt;execution&gt;
                        &lt;id&gt;test&lt;/id&gt;
                        &lt;phase&gt;process-test-classes&lt;/phase&gt;
                        &lt;configuration&gt;
                          &lt;test&gt;true&lt;/test&gt;
                        &lt;/configuration&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;generateInhabitants&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;</pre></div><p>The plugin has the following configuration options:</p><ul><li>outputDirectory (the place the output file will go, defaults to $<a name="project.build.outputDirectory">project.build.outputDirectory</a>)</li><li>testOutputDirectory (the place the output will go if test is true, defaults to $<a name="project.build.testOutputDirectory">project.build.testOutputDirectory</a>)</li><li>verbose (true or false)</li><li>test Set to true if this execution should be for the tests rather than main</li><li>locator The name of the locator file (which is &quot;default&quot; by default)</li></ul></div><div class="section"><h2><a name="Eclipse_Plugin">Eclipse Plugin</a></h2><p>Under Construction</p></div><div class="section"><h2><a name="Ant_Task">Ant Task</a></h2><p>Under Construction </p></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2012
    
          Oracle Corporation
          
  

  
  
  &nbsp;| Last Published: 05/23/2012
  &nbsp;| Version: 2.1.4-SNAPSHOT
</div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
