<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">










<html>
  <head>
    <title>Extensibility with HK2</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      </head>
  <body class="composite">
    <!-- TODO: move this into JavaScript to patch the skin
      <div class="xright">  </div>
    -->
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Compatibility<a name="Compatibility"></a></h2><p>This page describes modularity with the HK2 2.0 API, which is based on the JSR-330 standard annotations. Also, Habitat has been replaced with a new interface called <a href="./apidocs/org/glassfish/hk2/api/ServiceLocator.html">ServiceLocator</a>. More information can be found <a href="./index.html">here</a>.</p></div><div class="section"><h2>Extensibility of HK2<a name="Extensibility_of_HK2"></a></h2><p>HK2 is extensible along many directions. This page is intended to give an overview and example of each dimension along which users can customize thier HK2 environment. Among the set of things which can be extended are these:</p><ul><li><a href="#Adding_a_Scope_and_Context_to_the_system">Adding a Scope and Context to the system</a></li><li><a href="#Dealing_with_ClassLoading_issues">Dealing with ClassLoading issues</a></li><li><a href="#Custom_Injection_Resolvers">Custom Injection Resolvers</a></li><li><a href="#Foreign_Active_Descriptor_implementations">Foreign Active Descriptor implementations</a></li><li><a href="#Validation">Validation</a></li></ul><div class="section"><h3><a name="Adding_a_Scope_and_Context_to_the_system">Adding a Scope and Context to the system</a></h3><p>This <a href="./examples/ctm/index.html">example</a> adds a context that is based on the current running tenant.</p><p>This <a href="./examples/custom-resolver/index.html">example</a> adds a request scoped context.</p></div><div class="section"><h3><a name="Dealing_with_ClassLoading_issues">Dealing with ClassLoading issues</a></h3><p>Classloading is an interesting challenge in any Java environment. HK2 defers classloading as long as possible, but at some point, it must get access to the true class in order to create and inject instances. At that moment, HK2 will attempt to reify the descriptor, using the <a href="./apidocs/org/glassfish/hk2/api/ServiceLocator.html">ServiceLocator</a> reify method.</p><p>Every <a href="./apidocs/org/glassfish/hk2/api/Descriptor.html">Descriptor</a> bound into the system has an associated <a href="./apidocs/org/glassfish/hk2/api/HK2Loader.html">HK2Loader</a>. If the getLoader method of <a href="./apidocs/org/glassfish/hk2/api/Descriptor.html">Descriptor</a> returns null, then the system defined algorithm for loading classes will be used. Otherwise, the given <a href="./apidocs/org/glassfish/hk2/api/HK2Loader.html">HK2Loader</a> will be used to load the class described by this <a href="./apidocs/org/glassfish/hk2/api/Descriptor.html">Descriptor</a>.</p><p>The system algorithm used when the getLoader method of <a href="./apidocs/org/glassfish/hk2/api/Descriptor.html">Descriptor</a> returns null is to first consult the classloader of the class being injected into, if available. If not available, HK2 will use the classloader that loaded HK2 itself. Failing this, the class will fail to be loaded and an exception will be thrown.</p><p>Note that since the user is providing an implementation of <a href="./apidocs/org/glassfish/hk2/api/HK2Loader.html">HK2Loader</a> rather than a java.lang.ClassLoader that it is possible to delay the instantiation of the underlying ClassLoader until the <a href="./apidocs/org/glassfish/hk2/api/Descriptor.html">Descriptor</a> is being reified. It might also be possible to have the implementation of <a href="./apidocs/org/glassfish/hk2/api/HK2Loader.html">HK2Loader</a> consult several underlying ClassLoaders, or construct the class dynamically using weaving or some other class building technology. The mind boggles at all the ways <a href="./apidocs/org/glassfish/hk2/api/HK2Loader.html">HK2Loader</a> can be implemented.</p></div><div class="section"><h3><a name="Custom_Injection_Resolvers">Custom Injection Resolvers</a></h3><p>This <a href="./examples/custom-resolver/index.html">example</a> adds a custom injection resolver that customizes the default JSR-330 injection resolver.</p></div><div class="section"><h3><a name="Foreign_Active_Descriptor_implementations">Foreign Active Descriptor implementations</a></h3><p>Here an example of Foreign Active Descriptors</p></div><div class="section"><h3><a name="Validation">Validation</a></h3><p>Here an example of a validating injection point</p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2012
    
          Oracle Corporation
          
  

  
  
  &nbsp;| Last Published: 04/10/2012
  &nbsp;| Version: 2.0.1-SNAPSHOT
</div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
